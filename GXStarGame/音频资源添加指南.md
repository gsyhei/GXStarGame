# 🎵 音频资源添加指南

## 📋 需要的音频文件

游戏需要以下音频文件才能播放音乐和音效：

### 背景音乐
| 文件名 | 格式 | 用途 | 时长建议 |
|--------|------|------|----------|
| `background_music.mp3` | MP3 | 游戏背景音乐 | 1-3分钟（会循环播放） |

### 游戏音效
| 文件名 | 格式 | 用途 | 时长建议 |
|--------|------|------|----------|
| `select.mp3` | MP3 | 选择宝石音效 | 0.1-0.3秒 |
| `swap.mp3` | MP3 | 交换宝石音效 | 0.2-0.4秒 |
| `match.mp3` | MP3 | 消除匹配音效 | 0.3-0.6秒 |
| `drop.mp3` | MP3 | 宝石下落音效 | 0.2-0.4秒 |
| `game_over.mp3` | MP3 | 游戏结束音效 | 0.5-1.0秒 |
| `button_tap.mp3` | MP3 | 按钮点击音效 | 0.1-0.2秒 |

---

## 🎨 音频风格建议

### 背景音乐
- **风格**：轻松、愉快、休闲
- **节奏**：中等，不要太快或太慢
- **情绪**：积极向上，不会让人烦躁
- **参考**：糖果传奇、泡泡龙等休闲游戏的背景音乐

### 音效
- **选择音效**：清脆的"叮"声
- **交换音效**：轻快的"咻"声
- **消除音效**：欢快的"啵"声或"叮叮"声
- **下落音效**：轻柔的下落声
- **游戏结束**：略带失落但不沮丧的音效
- **按钮点击**：简单的"咔嗒"声

---

## 📥 获取音频资源

### 方法1：免费资源网站（推荐）

#### 背景音乐
1. **Freesound** - https://freesound.org/
   - 注册免费账号
   - 搜索 "casual game music" 或 "puzzle game music"
   - 下载CC0或CC BY授权的音乐

2. **Free Music Archive** - https://freemusicarchive.org/
   - 搜索 "game music"
   - 注意查看授权协议

3. **Incompetech** - https://incompetech.com/
   - Kevin MacLeod的免费音乐
   - 需要在游戏中注明出处

#### 音效
1. **Freesound** - https://freesound.org/
   - 搜索关键词：
     - "button click"
     - "gem select"
     - "match"
     - "game over"

2. **Zapsplat** - https://www.zapsplat.com/
   - 免费音效库
   - 需要注册

3. **Mixkit** - https://mixkit.co/free-sound-effects/
   - 免费音效，无需注明出处

### 方法2：付费音效网站

1. **AudioJungle** - https://audiojungle.net/
   - 高质量音效
   - 价格：$1-10/个

2. **Pond5** - https://www.pond5.com/
   - 专业音效库

### 方法3：AI生成音乐

1. **Soundraw** - https://soundraw.io/
   - AI生成游戏音乐

2. **Mubert** - https://mubert.com/
   - AI生成背景音乐

### 方法4：自己制作

使用免费软件：
- **GarageBand** (Mac自带)
- **Audacity** (跨平台，免费)
- **LMMS** (免费音乐制作软件)

---

## ➕ 添加音频到Xcode项目

### 步骤1：准备音频文件

1. 确保所有音频文件已准备好
2. 重命名为正确的文件名
3. 确认格式为 MP3

### 步骤2：添加到Xcode

1. **打开Xcode项目**
   ```bash
   open GXStarGame.xcodeproj
   ```

2. **在项目导航器中找到 GXStarGame 文件夹**
   - 左侧项目导航器
   - GXStarGame → GXStarGame

3. **右键点击文件夹**
   - 选择 "Add Files to GXStarGame..."

4. **选择音频文件**
   - 选择所有音频文件（可以多选）
   - ✅ 勾选 "Copy items if needed"
   - ✅ 勾选 "Add to targets: GXStarGame"
   - 点击 "Add"

5. **验证添加成功**
   - 在项目导航器中应该能看到所有音频文件
   - 点击每个文件，右侧属性面板中 "Target Membership" 应该勾选了 GXStarGame

---

## 🧪 测试音频

### 运行游戏测试

1. 在Xcode中运行项目
2. 测试各项功能：
   - ✅ 菜单界面应开始播放背景音乐
   - ✅ 点击按钮应有音效
   - ✅ 选择宝石应有音效
   - ✅ 消除宝石应有音效
   - ✅ 游戏结束应有音效

### 如果没有声音

检查以下内容：

1. **文件是否正确添加**
   - 在Xcode项目导航器中查看
   - 文件名是否正确（区分大小写）

2. **音频格式是否正确**
   - 确认是 MP3 格式
   - 可以尝试用系统播放器测试文件是否损坏

3. **设备音量**
   - 检查模拟器/真机音量
   - 检查是否静音

4. **代码检查**
   - 查看Console是否有错误信息
   - 会显示：`⚠️ 找不到音效文件: xxx.mp3`

---

## 🎛️ 调整音量

如果觉得音量不合适，可以在代码中调整：

### 修改 AudioManager.swift

找到 `SoundEffect` 枚举中的 `volume` 属性：

```swift
var volume: Float {
    switch self {
    case .select, .buttonTap:
        return 0.5  // 调整这个值 (0.0-1.0)
    case .swap:
        return 0.6
    case .match:
        return 0.7
    case .drop:
        return 0.4
    case .gameOver:
        return 0.8
    }
}
```

背景音乐音量在 `playBackgroundMusic` 方法中：

```swift
backgroundMusicPlayer?.volume = 0.3 // 调整这个值 (0.0-1.0)
```

---

## 📝 音频文件规范

### 推荐规格

**背景音乐：**
- 格式：MP3
- 比特率：128-192 kbps
- 采样率：44.1 kHz
- 声道：立体声
- 文件大小：< 5 MB

**音效：**
- 格式：MP3
- 比特率：96-128 kbps
- 采样率：44.1 kHz
- 声道：单声道或立体声
- 文件大小：< 100 KB

### 转换音频格式

如果音频格式不对，可以使用这些工具转换：

**在线工具：**
- https://online-audio-converter.com/
- https://cloudconvert.com/

**Mac软件：**
- iTunes / Apple Music (导出为MP3)
- Audacity (免费)

**命令行：**
```bash
# 使用 ffmpeg 转换
ffmpeg -i input.wav -codec:a libmp3lame -qscale:a 2 output.mp3
```

---

## 📄 版权和授权

### 重要提醒

- ⚠️ **不要使用有版权的音乐**
- ✅ 使用 CC0 (公共域) 授权的资源最安全
- ✅ 使用 CC BY (署名) 授权需要注明作者
- ✅ 付费购买的音效通常有商业使用授权

### 在游戏中注明出处（如需要）

如果使用了需要署名的音乐，在设置界面添加：

```
音乐：
- Background Music by Kevin MacLeod (incompetech.com)
- Licensed under Creative Commons: By Attribution 3.0
```

---

## 🎼 推荐的具体音频

### 背景音乐推荐

在 Incompetech 搜索这些（免费，需署名）：
- "Scheming Weasel (faster version)" - 轻快愉悦
- "Pixel Peeker Polka (faster)" - 复古游戏风
- "Carefree" - 休闲轻松

### 音效推荐

在 Freesound 搜索：
- 按钮点击：搜索 "button click UI"
- 选择宝石：搜索 "gem select" 或 "ding"
- 消除：搜索 "pop" 或 "bubble pop"
- 下落：搜索 "drop" 或 "fall"
- 游戏结束：搜索 "game over" 或 "lose"

---

## 🔊 音效时机说明

游戏中音效播放的时机：

| 音效 | 触发时机 | 代码位置 |
|------|---------|---------|
| select | 点击选择宝石时 | ViewController.selectGem() |
| swap | （暂未使用，可选） | - |
| match | 宝石匹配消除时 | ViewController.didFindMatches() |
| drop | （暂未使用，可选） | - |
| game_over | 游戏结束时 | ViewController.gameEngineDidGameOver() |
| button_tap | 点击任何按钮时 | 各按钮的 @objc 方法中 |

---

## ⚙️ 可选：添加更多音效

如果你想添加更多音效，可以：

### 1. 在 AudioManager.swift 中添加新音效类型

```swift
enum SoundEffect {
    // ... 现有音效
    case swap       // 交换音效
    case drop       // 下落音效
    case newGem     // 新宝石生成
    
    var filename: String {
        switch self {
        // ... 现有cases
        case .swap:
            return "swap"
        case .drop:
            return "drop"
        case .newGem:
            return "new_gem"
        }
    }
    
    var volume: Float {
        switch self {
        // ... 现有cases
        case .swap:
            return 0.6
        case .drop:
            return 0.4
        case .newGem:
            return 0.5
        }
    }
}
```

### 2. 在适当的位置播放

在 ViewController 或 GameEngine 中调用：
```swift
AudioManager.shared.playSoundEffect(.swap)
```

---

## 🐛 常见问题

### Q: 为什么没有声音？
A: 
1. 检查文件名是否完全匹配（区分大小写）
2. 检查文件是否正确添加到项目
3. 查看Console是否有错误提示
4. 检查设备音量和静音开关

### Q: 音效延迟怎么办？
A: MP3格式可能有轻微延迟，如需更快响应可以使用WAV格式，但文件会更大。

### Q: 背景音乐不循环？
A: 检查代码中 `numberOfLoops = -1` 是否设置正确。

### Q: 音效重叠听起来很乱？
A: 这是正常的，多个宝石同时消除时会同时播放音效。可以通过调整音量或限制同时播放数量来优化。

### Q: 可以不添加音频文件吗？
A: 可以！代码已经做了容错处理，如果找不到音频文件只会在Console打印提示，不会崩溃。

---

## 📧 需要帮助？

如果在添加音频过程中遇到问题：

📧 **技术支持**: 279694479@qq.com

---

**祝你的游戏音效添加顺利！** 🎵✨

---

_音频资源指南版本：v1.0_  
_最后更新：2025年10月12日_


